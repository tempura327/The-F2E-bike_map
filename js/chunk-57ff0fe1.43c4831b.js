(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57ff0fe1"],{1276:function(e,t,n){"use strict";var a=n("2ba4"),i=n("c65b"),r=n("e330"),o=n("d784"),s=n("44e7"),c=n("825a"),u=n("1d80"),l=n("4840"),d=n("8aa5"),h=n("50c4"),f=n("577e"),p=n("dc4a"),v=n("f36a"),g=n("14c3"),b=n("9263"),m=n("9f7f"),x=n("d039"),y=m.UNSUPPORTED_Y,w=4294967295,R=Math.min,C=[].push,N=r(/./.exec),E=r(C),S=r("".slice),I=!x((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));o("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=f(u(this)),o=void 0===n?w:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!s(e))return i(t,r,e,o);var c,l,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,m=new RegExp(e.source,p+"g");while(c=i(b,m,r)){if(l=m.lastIndex,l>g&&(E(h,S(r,g,c.index)),c.length>1&&c.index<r.length&&a(C,h,v(c,1)),d=c[0].length,g=l,h.length>=o))break;m.lastIndex===c.index&&m.lastIndex++}return g===r.length?!d&&N(m,"")||E(h,""):E(h,S(r,g)),h.length>o?v(h,0,o):h}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:i(t,this,e,n)}:t,[function(t,n){var a=u(this),o=void 0==t?void 0:p(t,e);return o?i(o,t,a,n):i(r,f(a),t,n)},function(e,a){var i=c(this),o=f(e),s=n(r,i,o,a,r!==t);if(s.done)return s.value;var u=l(i,RegExp),p=i.unicode,v=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(y?"g":"y"),b=new u(y?"^(?:"+i.source+")":i,v),m=void 0===a?w:a>>>0;if(0===m)return[];if(0===o.length)return null===g(b,o)?[o]:[];var x=0,C=0,N=[];while(C<o.length){b.lastIndex=y?0:C;var I,T=g(b,y?S(o,C):o);if(null===T||(I=R(h(b.lastIndex+(y?C:0)),o.length))===x)C=d(o,C,p);else{if(E(N,S(o,x,C)),N.length===m)return N;for(var _=1;_<=T.length-1;_++)if(E(N,T[_]),N.length===m)return N;C=x=I}}return E(N,S(o,x)),N}]}),!I,y)},"3c61":function(e,t,n){"use strict";n("eae3")},"408a":function(e,t,n){var a=n("e330");e.exports=a(1..valueOf)},"44e7":function(e,t,n){var a=n("861d"),i=n("c6b6"),r=n("b622"),o=r("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},"4bb4":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isSearched?n("div",{staticClass:"search-result"},[n("b-button",{staticClass:"d-flex p-1 mr-2",attrs:{variant:"link"},on:{click:function(t){e.isSearched=!e.isSearched,e.isRouteSelected=!e.isRouteSelected,e.selectedCity=""}}},[n("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),n("ul",e._l(e.routeData,(function(t,a){return n("li",{key:a,staticClass:"a cursor-pointer mb-1",on:{click:function(n){return e.showRoute(t)}}},[e._v(e._s(t.RouteName))])})),0)],1):n("div",{staticClass:"controller"},[n("h1",{staticClass:"h1 font-weight-3 mb-4"},[e._v("路線搜尋")]),n("b-input",{staticClass:"mb-4"}),n("b-select",{staticClass:"mb-4",attrs:{options:e.cityOption},model:{value:e.selectedCity,callback:function(t){e.selectedCity=t},expression:"selectedCity"}}),n("b-button",{staticClass:"bg-primary",attrs:{block:""},on:{click:e.queryRoute}},[e._v("搜尋")])],1),e.isRouteSelected?n("div",{staticClass:"route-detail"},[n("h5",{staticClass:"h5 font-weight-3 mb-2"},[e._v(e._s(e.selectedRoute.RouteName))]),n("h6",{staticClass:"h6 mb-2"},[e._v(e._s(e.selectedRoute.City))]),n("h6",{staticClass:"h6 mb-2"},[e._v(e._s(e.selectedRoute.RoadSectionStart)+" - "+e._s(e.selectedRoute.RoadSectionEnd))]),n("h6",{staticClass:"h6 mb-2"},[e._v("全長："+e._s(e.selectedRoute.CyclingLength)+"m")])]):e._e(),n("div",[n("b-spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),n("div",{directives:[{name:"hide",rawName:"v-hide"}],attrs:{id:"map1"}})],1)])},i=[],r=n("1da1"),o=(n("96cf"),n("d81d"),n("d3b7"),n("ac1f"),n("1276"),n("5319"),n("5b81"),n("a9e3"),n("e192")),s=n.n(o),c=n("6c2d"),u={name:"Map",data:function(){return{isLoading:!0,isSearched:!1,isRouteSelected:!1,cityOption:[{text:"台北",value:"Taipei"},{text:"新北",value:"NewTaipei"},{text:"基隆",value:"Keelung"},{text:"桃園",value:"Taoyuan"},{text:"新竹",value:"Hsinchu"},{text:"苗栗",value:"Miaoli"},{text:"台中",value:"Taichung"},{text:"彰化",value:"Changhua"},{text:"南投",value:"Nantou"},{text:"雲林",value:"Yunlin"},{text:"嘉義",value:"Chiayi"},{text:"台南",value:"Tainan"},{text:"高雄",value:"Kaohsiung"},{text:"屏東",value:"Pingtung"},{text:"宜蘭",value:"Yilan"},{text:"花蓮",value:"Hualien"},{text:"台東",value:"Taitung"}],routeData:[],selectedCity:"",selectedRoute:{}}},created:function(){},mounted:function(){s.a.accessToken="pk.eyJ1IjoidGVtcHVyYTMyNyIsImEiOiJja3Z6eXVqdnQ1YTdxMm9tdHUwMGx4eXBmIn0.7SOTd4xVrpfdvJiDx5R34g",this.map=new s.a.Map({container:"map1",style:"mapbox://styles/mapbox/streets-v11",center:[121.5,25.1],zoom:10}),this.isLoading=!1},methods:{queryRoute:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a,i,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=(new Date).toGMTString(),a=new c["a"]("SHA-1","TEXT"),a.setHMACKey("OPt8cbnBt_P461mggB8qbzrZiDc","TEXT"),a.update("x-date: "+n),i=a.getHMAC("B64"),r='hmac username="83592d8c997f4933ae965e60e5995a2d", algorithm="hmac-sha1", headers="x-date", signature="'.concat(i,'"'),t.prev=6,t.next=9,fetch("https://ptx.transportdata.tw/MOTC/v2/Cycling/Shape/".concat(e.selectedCity,"?$top=30&$format=JSON"),{method:"GET",header:{Authorization:r,"X-Date":n,"Content-Type":"application/x-www-form-urlencoded"},"Accept-Encoding":"gzip"});case 9:o=t.sent,o.json().then((function(t){return e.routeData=t})),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](6),console.log("fail route");case 16:return t.prev=16,e.isSearched=!0,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[6,13,16,19]])})))()},showRoute:function(e){var t=/[A-Z\s(]+/,n=e.Geometry.replace(t,"").replaceAll(")","").replaceAll(" ",",").split(",");this.routeGeometry=[];for(var a=0;a<n.length;a++)a%2===0&&this.routeGeometry.push([Number(n[a]),Number(n[a+1])]);this.selectedRoute=e,this.isRouteSelected=!0,this.drawRoute()},drawRoute:function(){this.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:this.routeGeometry}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#D0104C","line-width":10}})}}},l=u,d=(n("3c61"),n("2877")),h=Object(d["a"])(l,a,i,!1,null,null,null);t["default"]=h.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("e330"),i=n("1d80"),r=n("577e"),o=n("5899"),s=a("".replace),c="["+o+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),d=function(e){return function(t){var n=r(i(t));return 1&e&&(n=s(n,u,"")),2&e&&(n=s(n,l,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},"5b81":function(e,t,n){"use strict";var a=n("23e7"),i=n("da84"),r=n("c65b"),o=n("e330"),s=n("1d80"),c=n("1626"),u=n("44e7"),l=n("577e"),d=n("dc4a"),h=n("ad6d"),f=n("0cb2"),p=n("b622"),v=n("c430"),g=p("replace"),b=RegExp.prototype,m=i.TypeError,x=o(h),y=o("".indexOf),w=o("".replace),R=o("".slice),C=Math.max,N=function(e,t,n){return n>e.length?-1:""===t?n:y(e,t,n)};a({target:"String",proto:!0},{replaceAll:function(e,t){var n,a,i,o,h,p,E,S,I,T=s(this),_=0,k=0,A="";if(null!=e){if(n=u(e),n&&(a=l(s("flags"in b?e.flags:x(e))),!~y(a,"g")))throw m("`.replaceAll` does not allow non-global regexes");if(i=d(e,g),i)return r(i,e,T,t);if(v&&n)return w(l(T),e,t)}o=l(T),h=l(e),p=c(t),p||(t=l(t)),E=h.length,S=C(1,E),_=N(o,h,0);while(-1!==_)I=p?l(t(h,_,o)):f(h,o,_,[],void 0,t),A+=R(o,k,_)+I,k=_+E,_=N(o,h,_+S);return k<o.length&&(A+=R(o,k)),A}})},7156:function(e,t,n){var a=n("1626"),i=n("861d"),r=n("d2bb");e.exports=function(e,t,n){var o,s;return r&&a(o=t.constructor)&&o!==n&&i(s=o.prototype)&&s!==n.prototype&&r(e,s),e}},a9e3:function(e,t,n){"use strict";var a=n("83ab"),i=n("da84"),r=n("e330"),o=n("94ca"),s=n("6eeb"),c=n("1a2d"),u=n("7156"),l=n("3a9b"),d=n("d9b5"),h=n("c04e"),f=n("d039"),p=n("241c").f,v=n("06cf").f,g=n("9bf2").f,b=n("408a"),m=n("58a8").trim,x="Number",y=i[x],w=y.prototype,R=i.TypeError,C=r("".slice),N=r("".charCodeAt),E=function(e){var t=h(e,"number");return"bigint"==typeof t?t:S(t)},S=function(e){var t,n,a,i,r,o,s,c,u=h(e,"number");if(d(u))throw R("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=m(u),t=N(u,0),43===t||45===t){if(n=N(u,2),88===n||120===n)return NaN}else if(48===t){switch(N(u,1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+u}for(r=C(u,2),o=r.length,s=0;s<o;s++)if(c=N(r,s),c<48||c>i)return NaN;return parseInt(r,a)}return+u};if(o(x,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var I,T=function(e){var t=arguments.length<1?0:y(E(e)),n=this;return l(w,n)&&f((function(){b(n)}))?u(Object(t),n,T):t},_=a?p(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),k=0;_.length>k;k++)c(y,I=_[k])&&!c(T,I)&&g(T,I,v(y,I));T.prototype=w,w.constructor=T,s(i,x,T)}},eae3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-57ff0fe1.43c4831b.js.map